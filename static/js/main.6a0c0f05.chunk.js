(this["webpackJsonpcsv-matcher"]=this["webpackJsonpcsv-matcher"]||[]).push([[0],{20:function(e,t,a){e.exports=a(33)},25:function(e,t,a){},26:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(9),r=a.n(l),s=(a(25),a(26),a(4)),i=a(37),o=a(38),m=a(39),u=a(40),d=a(41),f=a(42),E=a(43),b=a(44),h=a(45);var p=a(18),v=a(34),N=a(35),O=a(36),g=function(e){var t=e.titleName,a=e.className,l=e.getFileInfo,r=e.children,i=Object(n.useState)(null),o=Object(s.a)(i,2),m=o[0],u=o[1],d=Object(n.useState)(""),f=Object(s.a)(d,2),E=f[0],b=f[1],h=Object(n.useCallback)((function(e){"text/csv"===e[0].type?(b(""),u(e[0]),l(e)):(u(null),b("\u9019\u500b\u6a94\u6848\u4e0d\u662f .csv \u5594\uff01"))}),[]),g=Object(p.a)({onDrop:h}),k=g.getRootProps,S=g.getInputProps,j=g.isDragActive;return c.a.createElement("div",Object.assign({},k(),{className:"".concat(a," ").concat(j?"-active":"")}),c.a.createElement("input",Object.assign({},S(),{multiple:!1,accept:".csv"})),!m&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"icon"},c.a.createElement(v.a,null)),j?c.a.createElement("p",{className:"msg"},"\u62d6\u66f3\u5230\u9019\u88e1"):c.a.createElement("p",{className:"msg"},"\u9ede\u64ca\u6216\u62d6\u66f3\u5230\u9019\u88e1")),""!==E&&c.a.createElement("p",{className:"error"},c.a.createElement(N.a,null)," ",E),m&&c.a.createElement("p",{className:"name"},c.a.createElement(O.a,null)," ",t," ",m.name),c.a.createElement("p",{className:"info"},r))},k=(a(32),function(){var e={tagSelector:Object(n.useRef)(null),additionSelector:Object(n.useRef)(null),editSheetA:Object(n.useRef)(null),editSheetB:Object(n.useRef)(null),editSheetC:Object(n.useRef)(null)},t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],r=a[1],p=Object(n.useState)([]),v=Object(s.a)(p,2),N=v[0],O=v[1],k=Object(n.useState)([]),S=Object(s.a)(k,2),j=S[0],C=S[1],x=Object(n.useState)("normal"),y=Object(s.a)(x,2),w=y[0],A=y[1],B=Object(n.useState)("normal"),F=Object(s.a)(B,2),I=F[0],J=F[1],R=Object(n.useState)(!1),z=Object(s.a)(R,2),L=z[0],_=z[1],$=Object(n.useState)(!1),D=Object(s.a)($,2),P=D[0],T=D[1],W=Object(n.useState)(!1),U=Object(s.a)(W,2),q=U[0],G=U[1],H=Object(n.useState)(null),K=Object(s.a)(H,2),M=K[0],Q=K[1],V=Object(n.useState)(null),X=Object(s.a)(V,2),Y=X[0],Z=X[1],ee=Object(n.useState)(null),te=Object(s.a)(ee,2),ae=te[0],ne=te[1];function ce(e){var t=/,(?=(?:(?:[^"]*"){2})*[^"]*$)/g;return e.split(/\n(?=(?:(?:[^"]*"){2})*[^"]*$)/g).map((function(e){var a=e.split(t);return a=a.filter((function(e){return void 0!==e}))}))}Object(n.useEffect)((function(){}),[l,j]);var le=function(e,t){var a=e[0],n=new FileReader;n.onload=function(){var e=ce(n.result);switch(t){case"sheetA":Q({name:a.name,sheet:e});break;case"sheetB":Z({name:a.name,sheet:e})}},n.readAsText(a)},re=function(){var e=JSON.parse(JSON.stringify(Y.sheet)),t=Y.name,a=JSON.parse(JSON.stringify(M.sheet)),n=M.name;Q({name:t,sheet:e}),Z({name:n,sheet:a})},se=function(e){var t=l.slice();if(-1===t.indexOf(e))t.push(e);else{var a=t.findIndex((function(t){return t===e}));t.splice(a,1)}r(t)},ie=function(e){var t=j.slice();if(-1===t.indexOf(e))t.push(e);else{var a=t.findIndex((function(t){return t===e}));t.splice(a,1)}C(t)},oe=function(t,a){var n=t.currentTarget,c=e[a].current;c.classList.contains("-active")?c.classList.remove("-active"):c.classList.add("-active"),n.classList.contains("-active")?n.classList.remove("-active"):n.classList.add("-active")},me=function(e){switch(e){case"sheetA":ue(M.name,M.sheet);break;case"sheetB":ue(Y.name,Y.sheet);break;case"sheetC":ue("merge-".concat(M.name),ae)}},ue=function(e,t){var a="";t.forEach((function(e){var t="";e.forEach((function(e,a){0===a&&console.log(e);var n=e.replace(/#/gi,"\uff03");n=0===a?n:",".concat(n),t+=n})),a+=t+"\n"})),function(e,t){var a=document.createElement("a");a.setAttribute("download",e),a.setAttribute("href",t),a.click(),document.body.append(a)}("".concat(e),"data:text/csv;charset=utf-8,%EF%BB%BF"+encodeURI(a))};return c.a.createElement("div",{className:"csv-matcher"},c.a.createElement("div",{className:"upload-wrapper ".concat(L?"-active":"")},c.a.createElement("button",{onClick:function(){var e=ce("title, value_1, value_2, value_3,\n    apple, 10, 12, 15,\n    banana, 8, 9, 2,\n    cat, 100, 8, 6,"),t=ce("title, name, value_2, value_3,\n    apple, \u860b\u679c, 12, 15,\n    banana, \u9999\u8549, 9, 2,\n    cat, \u8c93, 8, 6,");Q({name:"example1",sheet:e}),Z({name:"example2",sheet:t}),G(!0)},className:"example"},"Example Sheet"),c.a.createElement("div",{className:"drop-zone ".concat(M&&Y?"-active":"")},c.a.createElement(g,{titleName:"\u57fa\u790e\u8868\u683c",className:"file ".concat(q?"-blur":""),getFileInfo:function(e){return le(e,"sheetA")}},"\u3010\u57fa\u790e\u8868\u683c\u3011\u7528\u4f86\u88ab\u6bd4\u5c0d\u8868\u683c\u5167\u7684\u8cc7\u6599\uff0c\u4e5f\u53ef\u4ee5\u5e6b\u8868\u683c\u5167\u64f4\u5145\u66f4\u591a\u5167\u5bb9\u3002"),c.a.createElement(g,{titleName:"\u5c0d\u7167\u8868\u683c",className:"file ".concat(q?"-blur":""),getFileInfo:function(e){return le(e,"sheetB")}},"\u3010\u5c0d\u7167\u8868\u683c\u3011\u7528\u4f86\u6bd4\u5c0d\u57fa\u790e\u8868\u683c\u5167\u7684\u8cc7\u6599\uff0c\u4e5f\u53ef\u4ee5\u7528\u5c0d\u7167\u8868\u683c\u7684\u6b04\u4f4d\u64f4\u5145\u5230\u57fa\u790e\u8868\u683c\u3002"),c.a.createElement("button",{className:"start ".concat(M&&Y?"-active":""),onClick:function(){_(!0)}},c.a.createElement(i.a,{size:18}),c.a.createElement("span",null,"\u958b\u59cb\u88fd\u4f5c\u8868\u683c")))),c.a.createElement("div",{className:"application ".concat(P?"-result":""," -").concat(I)},c.a.createElement("div",{className:"options-bar"},c.a.createElement("div",{className:"controller-wrapper"},c.a.createElement("div",{className:"tag-selector controller"},c.a.createElement("div",{className:"dropdown"},c.a.createElement("div",{className:"head",onClick:function(e){return oe(e,"tagSelector")}},c.a.createElement(o.a,null),c.a.createElement("span",null,"\u6838\u5c0d\u6b04\u4f4d")),c.a.createElement("div",{className:"items",ref:e.tagSelector},Y&&Y.sheet[0].map((function(e,t){return c.a.createElement("button",{key:t,className:-1!==l.indexOf(t)?"-tag":"",onClick:function(){return se(t)}},e)})))),c.a.createElement("div",{className:"selected"},l&&l.map((function(e,t){return c.a.createElement("button",{key:t,onClick:function(){return se(e)}},c.a.createElement(m.a,{size:14}),Y.sheet[0][e])})))),c.a.createElement("div",{className:"addition-selector controller"},c.a.createElement("div",{className:"dropdown"},c.a.createElement("div",{className:"head",onClick:function(e){return oe(e,"additionSelector")}},c.a.createElement(u.a,null),c.a.createElement("span",null,"\u6dfb\u52a0\u6b04\u4f4d")),c.a.createElement("div",{className:"items",ref:e.additionSelector},Y&&Y.sheet[0].map((function(e,t){return c.a.createElement("button",{key:t,className:-1!==j.indexOf(t)?"-tag":"",onClick:function(){return ie(t)}},e)})))),c.a.createElement("div",{className:"selected"},j&&j.map((function(e,t){return c.a.createElement("button",{key:t,onClick:function(){return ie(e)}},c.a.createElement(m.a,null),Y.sheet[0][e])}))))),c.a.createElement("button",{className:"options-submit",onClick:function(){return function(){var e=JSON.parse(JSON.stringify(M.sheet)),t=[],a=e[0].length+j.length,n=e[0].length;j.forEach((function(t){e[0].push(Y.sheet[0][t])})),Y.sheet.forEach((function(c){var r=l.map((function(e){return c[e]}));e.forEach((function(e,l){0!==l&&(function(e,t){return t.map((function(t){return-1!==e.indexOf(t)})).includes(!0)}(e,r)&&j.forEach((function(r,s){e.length<a?e.push(c[r]):(-1===t.indexOf(l)&&t.push(l),e[n+s]+=" \uff0f ".concat(c[r]))})))}))})),e.forEach((function(e){if(e.length<a)for(var t=0;t<a;t++)e[t]=void 0===e[t]?"":e[t]})),ne(e),O(t),T(!0)}()}},c.a.createElement(d.a,{size:18}),c.a.createElement("span",null,"\u88fd\u4f5c\u8868\u683c"))),c.a.createElement("div",{className:"table-wrapper -".concat(w," ")},c.a.createElement("div",{className:"item left"},c.a.createElement("div",{className:"table-head"},c.a.createElement("div",{className:"name"},c.a.createElement(i.a,null),c.a.createElement("span",null,"\u57fa\u790e\u8868\u683c ",M&&M.name)),c.a.createElement("div",{className:"dropdown"},c.a.createElement("button",{onClick:function(e){return oe(e,"editSheetA")}},"\u7de8\u8f2f"),c.a.createElement("div",{className:"items",ref:e.editSheetA},c.a.createElement("button",{className:"file-selector"},c.a.createElement("label",{htmlFor:"sheet-a-upload"},"\u91cd\u65b0\u9078\u64c7\u8868\u683c"),c.a.createElement("input",{onChange:function(e){le(e.target.files,"sheetA"),oe(e,"editSheetA")},id:"sheet-a-upload",className:"button",type:"file"})),c.a.createElement("button",{onClick:re},"\u8868\u683c\u4e92\u63db"),c.a.createElement("button",{onClick:function(e){me("sheetA"),oe(e,"editSheetA")}},"\u4e0b\u8f09\u6b64\u8868\u683c")))),c.a.createElement("div",{className:"table"},c.a.createElement("table",null,c.a.createElement("tbody",null,M&&M.sheet.map((function(e,t){return c.a.createElement("tr",{key:"l".concat(t)},e.map((function(e,t){return c.a.createElement("td",{key:"c".concat(t)},e)})))}))))),"normal"===w&&c.a.createElement("button",{className:"expand-button",onClick:function(){return A("left")}},c.a.createElement(f.a,null)),"normal"!==w&&c.a.createElement("button",{className:"expand-button -reverse",onClick:function(){return A("normal")}},c.a.createElement(E.a,null))),c.a.createElement("div",{className:"item right"},c.a.createElement("div",{className:"table-head"},c.a.createElement("div",{className:"name"},c.a.createElement(b.a,null),c.a.createElement("span",null,"\u5c0d\u7167\u8868\u683c ",Y&&Y.name)),c.a.createElement("div",{className:"dropdown"},c.a.createElement("button",{onClick:function(e){return oe(e,"editSheetB")}},"\u7de8\u8f2f"),c.a.createElement("div",{className:"items",ref:e.editSheetB},c.a.createElement("button",{className:"file-selector"},c.a.createElement("label",{htmlFor:"sheet-b-upload"},"\u91cd\u65b0\u9078\u64c7\u8868\u683c"),c.a.createElement("input",{onChange:function(e){le(e.target.files,"sheetB"),oe(e,"editSheetB")},id:"sheet-b-upload",className:"button",type:"file"})),c.a.createElement("button",{onClick:re},"\u8868\u683c\u4e92\u63db"),c.a.createElement("button",{onClick:function(e){me("sheetB"),oe(e,"editSheetB")}},"\u4e0b\u8f09\u6b64\u8868\u683c")))),c.a.createElement("div",{className:"table"},c.a.createElement("table",null,c.a.createElement("tbody",null,Y&&Y.sheet.map((function(e,t){return c.a.createElement("tr",{key:"l".concat(t)},e.map((function(e,t){return c.a.createElement("td",{key:"c".concat(t),className:"".concat(-1!==l.indexOf(t)?"-tag":""," ").concat(-1!==j.indexOf(t)?"-addition":"")},e)})))}))))),"normal"===w&&c.a.createElement("button",{className:"expand-button",onClick:function(){return A("right")}},c.a.createElement(f.a,null)),"normal"!==w&&c.a.createElement("button",{className:"expand-button -reverse",onClick:function(){return A("normal")}},c.a.createElement(E.a,null)))),c.a.createElement("div",{className:"result-wrapper"},c.a.createElement("div",{className:"table-head"},c.a.createElement("div",{className:"name"},c.a.createElement(h.a,null),c.a.createElement("span",null,"\u5408\u4f75\u5f8c\u8868\u683c")),c.a.createElement("div",{className:"dropdown"},c.a.createElement("button",{onClick:function(e){return oe(e,"editSheetC")}},"\u7de8\u8f2f"),c.a.createElement("div",{className:"items",ref:e.editSheetC},c.a.createElement("button",{onClick:function(e){me("sheetC"),oe(e,"editSheetC")}},"\u4e0b\u8f09\u6b64\u8868\u683c"))),c.a.createElement("button",{className:"close",onClick:function(){ne([]),T(!1)}},c.a.createElement(m.a,null))),c.a.createElement("div",{className:"table"},c.a.createElement("table",null,c.a.createElement("tbody",null,ae&&ae.map((function(e,t){return c.a.createElement("tr",{key:"l".concat(t),className:-1!==N.indexOf(t)?"-conflict":""},e.map((function(e,t){return c.a.createElement("td",{key:"c".concat(t),className:t+1>M.sheet[0].length?"-increase":""},e)})))}))))),"fill"===I&&c.a.createElement("button",{className:"expand-button",onClick:function(){return J("normal")}},c.a.createElement(E.a,{size:24})),"fill"!==I&&c.a.createElement("button",{className:"expand-button -reverse",onClick:function(){return J("fill")}},c.a.createElement(f.a,{size:24})))))});var S=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.6a0c0f05.chunk.js.map